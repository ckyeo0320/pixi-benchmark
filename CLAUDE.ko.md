# CLAUDE.md

이 파일은 이 저장소의 코드로 작업할 때 Claude Code(claude.ai/code)에 지침을 제공합니다.

## 프로젝트 개요

이것은 성능 프로파일링과 배치 친화적 대 배치 비친화적 렌더링 시나리오를 보여주는 PixiJS 4.7 캔버스 최적화 플레이그라운드입니다. 이 프로젝트는 캔버스 렌더링 성능 분석에 중점을 둔 단일 파일 HTML 애플리케이션입니다.

## 아키텍처

- **단일 HTML 파일**: `index.html`에 전체 애플리케이션이 포함되어 있습니다.
- **PixiJS 4.7**: 성능 테스트를 위해 캔버스 렌더러 강제(WebGL 아님)
- **캔버스 2D 프로파일링**: 그리기 호출 카운팅을 위한 사용자 정의 패치된 CanvasRenderingContext2D
- **아틀라스 텍스처 시스템**: 배치 분석을 위한 BaseTexture 전환 모니터링

### 주요 구성 요소

1. **캔버스 프로파일링 시스템** (88-194행): 다음을 계산하기 위해 CanvasRenderingContext2D를 패치합니다.
   - 래스터 작업(drawImage 호출)
   - 경로 작업(채우기/획)
   - 텍스트 작업
   - 지우기 작업
   - 블렌드 모드 변경
   - 고유한 텍스처 소스

2. **아틀라스 모니터링** (374-478행): 프레임당 BaseTexture 전환 및 고유한 아틀라스 사용량을 추적합니다.

3. **테스트 시나리오**:
   - **배치 친화적**: 일관된 블렌드 모드로 단일 아틀라스 BaseTexture를 사용합니다.
   - **배치 혼돈**: 혼합된 블렌드 모드로 스프라이트당 개별 텍스처를 생성합니다.

## 개발

이것은 브라우저에서 직접 열 수 있는 독립 실행형 HTML 파일입니다. 빌드 프로세스, 패키지 관리자 또는 종속성이 필요하지 않습니다.

### 애플리케이션 실행

웹 브라우저에서 `index.html`을 열기만 하면 됩니다. 애플리케이션은 다음을 수행합니다.
- CDN에서 PixiJS 4.7 로드
- 캔버스 렌더러 초기화
- 배치 친화적인 장면(스프라이트 800개)으로 시작

### 성능 테스트

UI 버튼을 사용하여 시나리오 간에 전환합니다.
- **배치 우호**: 배치 친화적인 렌더링(단일 아틀라스)을 생성합니다.
- **배치 비우호**: 배치 비친화적인 렌더링(여러 텍스처)을 생성합니다.
- **모두 지우기**: 모든 스프라이트를 지웁니다.

그리기 호출, 텍스처 전환 및 FPS를 포함한 실시간 성능 메트릭을 보려면 HUD(오른쪽 상단)를 모니터링하십시오.

## 코드 패턴

- 한국어 UI 레이블 및 주석
- `destroy(true)` 호출을 사용한 수동 메모리 관리
- 성능 중심 렌더링 최적화
- 매 프레임 재설정되는 프레임 기반 프로파일링 카운터